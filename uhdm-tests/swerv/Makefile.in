curr_dir:=$(dir $(lastword $(MAKEFILE_LIST)))
SWERV_VERSION ?= swerv
VENV = ${root_dir}/venv-swerv
FUSESOC_SETUP_TARGET ?= chipsalliance.org:cores:SweRV_EH1:1.8
SWERV = ${curr_dir}/${SWERV_VERSION}
TOP_TARGET_NAME ?= chipsalliance.org_cores_SweRV_EH1_1.8
SWERV_BUILD = ${root_dir}/build/$(TOP_TARGET_NAME)

CPU_COUNT = $(shell nproc)

verilator/swerv: clean-build
	(export PATH=${root_dir}/../image/bin:${PATH} && \
	 export RV_ROOT=${SWERV} && \
	 make TEST=hello_world -f ${SWERV}/tools/Makefile)
